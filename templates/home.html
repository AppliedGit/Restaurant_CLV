<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.0.0/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.0/chartjs-adapter-moment.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="https://rawgit.com/Anujarya300/bubble_maps/master/data/geography-data/datamaps.none.js"></script>

    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>


    <script src="https://unpkg.com/chartjs-chart-geo@3.8.0/build/index.umd.min.js"></script>
    <script src="https://unpkg.com/papaparse@5.3.2/papaparse.min.js"></script>
    <script src="https://unpkg.com/chartjs-plugin-datalabels@2.0.0-rc.1/dist/chartjs-plugin-datalabels.js"></script>

    <title>ADRA</title>
    <style>
        #customer_segmantation tr td:nth-child(1) {
            text-align: left;
        }

        #customer_segmantation tr td {
            font-size: 12px;
            padding: 8px !important;
            vertical-align: middle;
            text-align: center;
        }

        #customer_segmantation tr th {
            padding: 4px !important;
            margin: 4px !important;
            font-size: 13px;
            vertical-align: middle;
            text-align: center;
        }

        #customer_segmantation tr td:nth-child(2),
        #customer_segmantation tr td:nth-child(3),
        #customer_segmantation tr td:nth-child(4),
        #customer_segmantation tr td:nth-child(5),
        #customer_segmantation tr td:nth-child(6) {
            font-size: 13px;
            color: grey;
        }

        #executive_summary tr td {
            font-size: 14px;
            padding: 10px !important;
            vertical-align: middle;
            text-align: center;
        }

        #executive_summary tr th {
            padding: 8px !important;
            margin: 8px !important;
            font-size: 15px;
            vertical-align: middle;
            text-align: center;
        }

        .active {
            color: #19875f !important;
        }
    </style>
    <script type="text/javascript">

        var prediction_graph, age_based_analytics_graph, revenue_graph;

        $(document).ready(function () {
            const chart_age = document.querySelectorAll(".chart");
            const chart_revenue = document.querySelectorAll(".chartLine");
            const chartMuliaxis = document.querySelectorAll(".chartPie");



            chart_age.forEach(function (chart) {
                var ctx = chart.getContext("2d");
                age_based_analytics_graph = new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: [],

                        datasets: [
                            {
                                label: "Revenue",
                                data: [],
                                borderColor: "rgba(54, 162, 235, 0.2)",
                                backgroundColor: "rgba(54, 162, 235, 0.2)",
                            },

                            // {
                            //     label: "Unknown",
                            //     hidden: true,
                            //     data: [],
                            //     borderColor: "rgba(255, 99, 132, 0.2)",
                            //     backgroundColor: "rgba(255, 99, 132, 0.2)",
                            // }
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'Revenue Share'
                                }
                            },
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Age'
                                }
                            }
                        }, plugins: {
                            tooltip: {
                                callbacks: {
                                    beforeTitle: function (context) {
                                        return 'Age Group';
                                    },
                                    // title:function(context){
                                    //   console.log(context[0].label);
                                    //   return `${context[0].label} Day: ${weekarray[context[0].dataIndex]}`
                                    // },
                                    afterTitle: function (context) {

                                        //return 'Average CLV:' + avg_clv[context[0].dataIndex];
                                    },
                                    beforeBody: function (context) {
                                        // const newLineArray = [];
                                        // newLineArray.push('Hello');
                                        // newLineArray.push('Bye');
                                        // return newLineArray;
                                        //return 'No Customer Age Group :' + no_cus_age_group[context[0].dataIndex];;
                                    },
                                    // beforeLabel:function(context){
                                    //      return 'Before Label';
                                    // },
                                    // afterLabel: function(context){
                                    //      return 'After Label';
                                    // },
                                    // afterBody:function(context){
                                    //     return '+++++++++';
                                    // },
                                    afterFooter: function (context) {
                                        //return 'Value of Revenue: ' + revenue_val[context[0].dataIndex];;
                                    },

                                }
                            }
                        }
                    },
                });
            });

            chart_revenue.forEach(function (chart) {
                var ctx = chart.getContext("2d");
                revenue_graph = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: "Revenue ",
                                data: [],
                                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                borderColor: 'lightgreen',
                                tension: 0.4,
                                fill: true,
                                pointRadius: 0,
                                pointStyle: 'rect',
                                pointBorderColor: 'green',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            },
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'Revenue (in $ Millions)'
                                }
                            },
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Day'
                                }
                            }
                        },
                    },
                });
            });

            chartMuliaxis.forEach(function (chart) {
                var ctx = chart.getContext("2d");

                prediction_graph = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: [],

                        datasets: [
                            {
                                label: "CLV",
                                data: [],

                                backgroundColor: 'red',
                                borderColor: 'red',
                                tension: 0.4,
                                fill: false,
                                pointRadius: 0,
                                pointStyle: 'rect',
                                pointBorderColor: 'red',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            },
                            {
                                label: "Actual",
                                data: [],
                                backgroundColor: 'blue',
                                borderColor: 'blue',
                                tension: 0.4,
                                fill: false,
                                pointRadius: 0,
                                pointStyle: 'rect',
                                pointBorderColor: 'blue',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            }
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'CLV'
                                }
                            }
                            ,
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Day of the Year'
                                }
                            }

                        },
                        plugins: {
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: true,
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'xy',
                                }
                            }
                        }
                    }
                });
                $("#test").click(function () {
                    prediction_graph.resetZoom();
            });
            });
            
            display_dasboard_data();
            get_location();


            Promise.all([
                fetch("https://unpkg.com/us-atlas/states-10m.json").then((r) => r.json()),
                fetch(
                    "https://gist.githubusercontent.com/mbostock/9535021/raw/928a5f81f170b767162f8f52dbad05985eae9cac/us-state-capitals.csv"
                )
                    .then((r) => r.text())
                    .then((d) => Papa.parse(d, { dynamicTyping: true, header: true }).data)
            ]).then(([us, data]) => {
                const states = ChartGeo.topojson.feature(us, us.objects.states).features;

                const chart = new Chart(document.getElementById("canvas").getContext("2d"), {
                    type: "bubbleMap",
                    data: {
                        labels: data.map((d) => d.description),
                        datasets: [
                            {
                                outline: states,
                                showOutline: true,
                                backgroundColor: "steelblue",
                                data: data.map((d) =>
                                    Object.assign(d, { value: Math.round(Math.random() * 10) })
                                )
                            }
                        ]
                    },
                    options: {
                        plugins: {
                            legend: {
                                display: false
                            },
                            datalabels: {
                                align: "top",
                                formatter: (v) => {
                                    return v.description;
                                }
                            }
                        },
                        scales: {
                            xy: {
                                projection: "albersUsa"
                            },
                            r: {
                                size: [1, 20]
                            }
                        }
                    }
                });
            });
            // $("select").change(function () {
            //     $(this).find("option:selected").each(function () {
            //         var optionValue = $(this).attr("value");
            //         if (optionValue) {
            //             $(".box").not("." + optionValue).hide();
            //             $("." + optionValue).show();
            //         } else {
            //             $(".box").hide();
            //         }
            //     });
            // }).change();

            // // To style all selects
            // $('.selectpicker').selectpicker();
        });

        function display_dasboard_data() {
            $.ajax({
                url: "/get_time_series_data",
                success: function (result) {
                    prediction_graph.data.labels = result["prediction_graph"]["day_of_year"];
                    prediction_graph.data.datasets[0]["data"] = result["prediction_graph"]["prediction_val"];
                    prediction_graph.data.datasets[1]["data"] = result["prediction_graph"]["transaction_val"];
                    prediction_graph.update();
                    // alert(result["analytics_graph"]["age_category"])
                    age_based_analytics_graph.data.labels = result["analytics_graph"]["age_category"];
                    age_based_analytics_graph.data.datasets[0]["data"] = result["analytics_graph"]["age_category_rev_percentage"];
                    //age_based_analytics_graph.data.datasets[1]["data"] = ["1,2,3,4,5,6"];
                    age_based_analytics_graph.update();

                    revenue_graph.data.labels = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                    revenue_graph.data.datasets[0]["data"] = result["revenue_graph"]["transaction_value"];
                    revenue_graph.update();

                    fill_segment_table_data(result);
                    

                    $("#cus_sel").text(result["executive_summary"]["customers_selected"]);
                    $("#cus_pre").text(result["executive_summary"]["customers_prev"]);
                    $("#cus_cha").text(result["executive_summary"]["customers_changes"]);

                    $("#ord_sel").text(result["executive_summary"]["orders_selected"]);
                    $("#ord_pre").text(result["executive_summary"]["orders_prev"]);
                    $("#ord_cha").text(result["executive_summary"]["orders_changes"]);

                    $("#rev_sel").text(parseFloat(result["executive_summary"]["revenue_selected"]).toFixed(2));
                    $("#rev_pre").text(parseFloat(result["executive_summary"]["revenue_prev"]).toFixed(2));
                    $("#rev_cha").text(result["executive_summary"]["revenue_changes"]);

                    $("#aov_sel").text(parseFloat(result["executive_summary"]["aov_selected"]).toFixed(2));
                    $("#aov_pre").text(parseFloat(result["executive_summary"]["aov_prev"]).toFixed(2));
                    $("#aov_cha").text(result["executive_summary"]["aov_changes"]);

                    $("#newcus_sel").text(result["executive_summary"]["new_customers_selected"]);
                    $("#newcus_pre").text(result["executive_summary"]["new_customers_prev"]);
                    $("#newcus_cha").text(result["executive_summary"]["new_customers_changes"]);

                    $("#rep_sel").text(result["executive_summary"]["repeat_customers_selected"]);
                    $("#rep_pre").text(result["executive_summary"]["repeat_customers_prev"]);
                    $("#rep_cha").text(result["executive_summary"]["repeat_customers_changes"]);

                    $("#churn_sel").text(result["executive_summary"]["churn_customers_selected"]);
                    $("#churn_pre").text(result["executive_summary"]["churn_customers_prev"]);
                    $("#churn_cha").text(result["executive_summary"]["churn_customers_changes"]);

                    $("#acl_sel").text(parseFloat(result["executive_summary"]["aclv_customers_selected"]).toFixed(2));
                    $("#acl_pre").text(parseFloat(result["executive_summary"]["aclv_customers_prev"]).toFixed(2));
                    $("#acl_cha").text(result["executive_summary"]["aclv_customers_changes"]);
                }
            });

        }

        function get_location() {
            $.ajax({
                url: "/get_location",
                success: function (result) {
                    for (var i = 0; i < result.length; i++) {
                        $("#segment_location_list").append("<option >" + result[i] + "</option>");
                        $("#age_location_list").append("<option >" + result[i] + "</option>");
                        $("#revenue_location_list").append("<option >" + result[i] + "</option>");
                        $("#excutive_summary_list").append("<option >" + result[i] + "</option>");
                        
                    }
                    
                    $("#age_location_list").selectpicker();
                    $("#revenue_location_list").selectpicker();                                                          
                    $("#segment_location_list").selectpicker('');
                    $("#excutive_summary_list").selectpicker();  

                }
            });
        }

        
        function location_based_customer_segmentation() {
            var location = $("#segment_location_list :selected").text();
            $.ajax({
                url: "/location_based_segment_data?location=" + location,
                success: function (result) {
                    
                    $("#loy_users").text(result["loyal_cus_clv"]["users"]);
                    $("#loy_freq").text(result["loyal_cus_clv"]["frequency"]);
                    $("#loy_aov").text(result["loyal_cus_clv"]["aov"]);
                    $("#loy_clv").text(result["loyal_cus_clv"]["clv"]);
                    $("#loy_rev").text(result["loyal_cus_clv"]["revenue"]);

                    $("#rep_users").text(result["repeat_cus_clv"]["users"]);
                    $("#rep_freq").text(result["repeat_cus_clv"]["frequency"]);
                    $("#rep_aov").text(result["repeat_cus_clv"]["aov"]);
                    $("#rep_clv").text(result["repeat_cus_clv"]["clv"]);
                    $("#rep_rev").text(result["repeat_cus_clv"]["revenue"]);

                    $("#cus_users").text(result["all_cus_clv"]["users"]);
                    $("#cus_freq").text(result["all_cus_clv"]["frequency"]);
                    $("#cus_aov").text(result["all_cus_clv"]["aov"]);
                    $("#cus_clv").text(result["all_cus_clv"]["clv"]);
                    $("#cus_rev").text(result["all_cus_clv"]["revenue"]);

                    $("#top_users").text(result["top_cus_clv"]["users"]);
                    $("#top_freq").text(result["top_cus_clv"]["frequency"]);
                    $("#top_aov").text(result["top_cus_clv"]["aov"]);
                    $("#top_clv").text(result["top_cus_clv"]["clv"]);
                    $("#top_rev").text(result["top_cus_clv"]["revenue"]);

                    $("#bottom_users").text(result["low_cus_clv"]["users"]);
                    $("#bottom_freq").text(result["low_cus_clv"]["frequency"]);
                    $("#bottom_aov").text(result["low_cus_clv"]["aov"]);
                    $("#bottom_clv").text(result["low_cus_clv"]["clv"]);
                    $("#bottom_rev").text(result["low_cus_clv"]["revenue"]);

                    $("#risk_users").text(result["risk_cus_clv"]["users"]);
                    $("#risk_freq").text(result["risk_cus_clv"]["frequency"]);
                    $("#risk_aov").text(result["risk_cus_clv"]["aov"]);
                    $("#risk_clv").text(result["risk_cus_clv"]["clv"]);
                    $("#risk_rev").text(result["risk_cus_clv"]["revenue"]);

                    $("#churn_users").text(result["churn_cus_clv"]["users"]);
                    $("#churn_freq").text(result["churn_cus_clv"]["frequency"]);
                    $("#churn_aov").text(result["churn_cus_clv"]["aov"]);
                    $("#churn_clv").text(result["churn_cus_clv"]["clv"]);
                    $("#churn_rev").text(result["churn_cus_clv"]["revenue"]);

                }
            });
        }
        function location_based_age_graph() {
            var location = $("#age_location_list :selected").text();
            $.ajax({
                url: "/age_based_location_data?location=" + location,
                success: function (result) {
                    age_based_analytics_graph.data.labels = result["analytics_graph"]["age_category"];
                    age_based_analytics_graph.data.datasets[0]["data"] = result["analytics_graph"]["age_category_rev_percentage"];
                    age_based_analytics_graph.update();

                }
            });
        }
        function location_based_revenue_graph() {
            var location = $("#revenue_location_list :selected").text();
            $.ajax({
                url: "/revenue_based_location_data?location=" + location,
                success: function (result) {
                    // revenue_graph.data.labels = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
                    revenue_graph.data.datasets[0]["data"] = result["revenue_graph"]["transaction_value"];
                    revenue_graph.update();

                }
            });
        }

        function location_based_excutive_summary(result)
        {
            $("#fa_loading").show();
            var location = $("#excutive_summary_list :selected").text();
            $.ajax({
                url: "/location_based_excutive_summary?location=" + location,
                success: function (result) {
                    $("#fa_loading").hide();
                    $("#cus_sel").text(result["executive_summary"]["customers_selected"]);
                    $("#cus_pre").text(result["executive_summary"]["customers_prev"]);
                    $("#cus_cha").text(result["executive_summary"]["customers_changes"]);

                    $("#ord_sel").text(result["executive_summary"]["orders_selected"]);
                    $("#ord_pre").text(result["executive_summary"]["orders_prev"]);
                    $("#ord_cha").text(result["executive_summary"]["orders_changes"]);

                    $("#rev_sel").text(parseFloat(result["executive_summary"]["revenue_selected"]).toFixed(2));
                    $("#rev_pre").text(parseFloat(result["executive_summary"]["revenue_prev"]).toFixed(2));
                    $("#rev_cha").text(result["executive_summary"]["revenue_changes"]);

                    $("#aov_sel").text(parseFloat(result["executive_summary"]["aov_selected"]).toFixed(2));
                    $("#aov_pre").text(parseFloat(result["executive_summary"]["aov_prev"]).toFixed(2));
                    $("#aov_cha").text(result["executive_summary"]["aov_changes"]);

                    $("#newcus_sel").text(result["executive_summary"]["new_customers_selected"]);
                    $("#newcus_pre").text(result["executive_summary"]["new_customers_prev"]);
                    $("#newcus_cha").text(result["executive_summary"]["new_customers_changes"]);

                    $("#rep_sel").text(result["executive_summary"]["repeat_customers_selected"]);
                    $("#rep_pre").text(result["executive_summary"]["repeat_customers_prev"]);
                    $("#rep_cha").text(result["executive_summary"]["repeat_customers_changes"]);

                    $("#churn_sel").text(result["executive_summary"]["churn_customers_selected"]);
                    $("#churn_pre").text(result["executive_summary"]["churn_customers_prev"]);
                    $("#churn_cha").text(result["executive_summary"]["churn_customers_changes"]);

                    $("#acl_sel").text(parseFloat(result["executive_summary"]["aclv_customers_selected"]).toFixed(2));
                    $("#acl_pre").text(parseFloat(result["executive_summary"]["aclv_customers_prev"]).toFixed(2));
                    $("#acl_cha").text(result["executive_summary"]["aclv_customers_changes"]);

                }
            });
        }

        function fill_segment_table_data(result)
        {
                    $("#loy_users").text(result["loyal_cus_clv"]["users"]);
                    $("#loy_freq").text(result["loyal_cus_clv"]["frequency"]);
                    $("#loy_aov").text(parseFloat(result["loyal_cus_clv"]["aov"]).toFixed(2));
                    $("#loy_clv").text(parseFloat(result["loyal_cus_clv"]["clv"]).toFixed(2));
                    $("#loy_rev").text(parseFloat(result["loyal_cus_clv"]["revenue"]).toFixed(2));

                    $("#rep_users").text(result["repeat_cus_clv"]["users"]);
                    $("#rep_freq").text(parseFloat(result["repeat_cus_clv"]["frequency"]).toFixed(2));
                    $("#rep_aov").text(parseFloat(result["repeat_cus_clv"]["aov"]).toFixed(2));
                    $("#rep_clv").text(parseFloat(result["repeat_cus_clv"]["clv"]).toFixed(2));
                    $("#rep_rev").text(parseFloat(result["repeat_cus_clv"]["revenue"]).toFixed(2));

                    $("#cus_users").text(result["all_cus_clv"]["users"]);
                    $("#cus_freq").text(parseFloat(result["all_cus_clv"]["frequency"]).toFixed(2));
                    $("#cus_aov").text(parseFloat(result["all_cus_clv"]["aov"]).toFixed(2));
                    $("#cus_clv").text(parseFloat(result["all_cus_clv"]["clv"]).toFixed(2));
                    $("#cus_rev").text(parseFloat(result["all_cus_clv"]["revenue"]).toFixed(2));

                    $("#top_users").text(result["top_cus_clv"]["users"]);
                    $("#top_freq").text(parseFloat(result["top_cus_clv"]["frequency"]).toFixed(2));
                    $("#top_aov").text(parseFloat(result["top_cus_clv"]["aov"]).toFixed(2));
                    $("#top_clv").text(parseFloat(result["top_cus_clv"]["clv"]).toFixed(2));
                    $("#top_rev").text(parseFloat(result["top_cus_clv"]["revenue"]).toFixed(2));

                    $("#bottom_users").text(result["low_cus_clv"]["users"]);
                    $("#bottom_freq").text(parseFloat(result["low_cus_clv"]["frequency"]).toFixed(2));
                    $("#bottom_aov").text(parseFloat(result["low_cus_clv"]["aov"]).toFixed(2));
                    $("#bottom_clv").text(parseFloat(result["low_cus_clv"]["clv"]).toFixed(2));
                    $("#bottom_rev").text(parseFloat(result["low_cus_clv"]["revenue"]).toFixed(2));

                    $("#risk_users").text(result["risk_cus_clv"]["users"]);
                    $("#risk_freq").text(parseFloat(result["risk_cus_clv"]["frequency"]).toFixed(2));
                    $("#risk_aov").text(parseFloat(result["risk_cus_clv"]["aov"]).toFixed(2));
                    $("#risk_clv").text(parseFloat(result["risk_cus_clv"]["clv"]).toFixed(2));
                    $("#risk_rev").text(parseFloat(result["risk_cus_clv"]["revenue"]).toFixed(2));

                    $("#churn_users").text(result["churn_cus_clv"]["users"]);
                    $("#churn_freq").text(parseFloat(result["churn_cus_clv"]["frequency"]).toFixed(2));
                    $("#churn_aov").text(parseFloat(result["churn_cus_clv"]["aov"]).toFixed(2));
                    $("#churn_clv").text(parseFloat(result["churn_cus_clv"]["clv"]).toFixed(2));
                    $("#churn_rev").text(parseFloat(result["churn_cus_clv"]["revenue"]).toFixed(2));
        }

    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light p-3"
        style="background-color: #ffffff !important;border-bottom: 1px solid rgb(211, 208, 208); ">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03"
                aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="nav nav-tabs" id="nav-tab" role="tablist" style="border: none;">
                <a class="nav-link1 active text-decoration-none" id="nav-home-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true"
                    href="javascript:;">Home</a>&emsp;
                <a class="nav-link1 text-decoration-none" id="nav-profile-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-exeutive" type="button" role="tab" aria-controls="nav-profile"
                    aria-selected="false" href="javascript:;">Executive Summary</a>

            </div>
            <form class="d-flex">
                <i class="fa fa-power-off text-danger" aria-hidden="true"></i>
            </form>
        </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <main class="mt-2 pt-2">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h6 class="card-title text-primary">Customer Segmentations for <label class="text-secondary">Brasserie Blanc Bath</label>, 01-08-2019 to 28-02-2022</h6>
                                        </div>
                                        <div class="col-md-4 offset-md-4">
                                            <select id="segment_location_list"
                                                onchange="location_based_customer_segmentation();" data-max-options="5"
                                                data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <hr>
                                    <table class="table table-bordered table-responsive" id="customer_segmantation">
                                        <tbody>
                                            <tr>
                                                <th class="col-7 bg-secondary"></th>
                                                <th class="col-1 bg-secondary text-white">Users</th>
                                                <th class="col-1 bg-secondary text-white">Frequency</th>
                                                <th class="col-1 bg-secondary text-white">AOV</th>
                                                <th class="col-1 bg-secondary text-white">CLV</th>
                                                <th class="col-1 bg-secondary text-white">Revenue</th>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Loyals<br /> <label
                                                        class="text-secondary">Customer
                                                        with 3+ Purchase</label></td>
                                                <td id="loy_users">90,000</td>
                                                <td id="loy_freq">3.1</td>
                                                <td id="loy_aov"></td>
                                                <td id="loy_clv"></td>
                                                <td id="loy_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Repeats<br /><label
                                                        class="text-secondary">Customer
                                                        with Purchases</label></td>
                                                <td id="rep_users">90,000</td>
                                                <td id="rep_freq">3.1</td>
                                                <td id="rep_aov"></td>
                                                <td id="rep_clv"></td>
                                                <td id="rep_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Customers<br /><label
                                                        class="text-secondary">Customer
                                                        with atleast 1 Purchase</label></td>
                                                <td id="cus_users">4524</td>
                                                <td id="cus_freq">4.3</td>
                                                <td id="cus_aov"></td>
                                                <td id="cus_clv"></td>
                                                <td id="cus_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Top Spenders<br /><label
                                                        class="text-secondary">Customers in the top quartile of
                                                        spending</label></td>
                                                <td id="top_users">90,000</td>
                                                <td id="top_freq">3.1</td>
                                                <td id="top_aov"></td>
                                                <td id="top_clv"></td>
                                                <td id="top_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Bottom Spenders<br /> <label
                                                        class="text-secondary">Customers in the bottom quartile of
                                                        spending</label></td>
                                                <td id="bottom_users">90,000</td>
                                                <td id="bottom_freq">3.1</td>
                                                <td id="bottom_aov"></td>
                                                <td id="bottom_clv"></td>
                                                <td id="bottom_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">At Risk Customers<br /><label
                                                        class="text-secondary">Customer at the risk of churning</label>
                                                </td>
                                                <td id="risk_users">90,000</td>
                                                <td id="risk_freq">3.1</td>
                                                <td id="risk_aov"></td>
                                                <td id="risk_clv"></td>
                                                <td id="risk_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Churned Customers<label class="text-secondary"
                                                        style="font-size: 12px;">Customer who have not
                                                        made a Purchase in 2x
                                                        the average number of days
                                                        between orders</label></td>
                                                <td id="churn_users">90,000</td>
                                                <td id="churn_freq">3.1</td>
                                                <td id="churn_aov"></td>
                                                <td id="churn_clv"></td>
                                                <td id="churn_rev"></td>
                                            </tr>
                                        </tbody>

                                    </table>

                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <h6 class="card-title text-primary">Customer Life Time Prediction Vs Actual OverTime <label class="text-secondary">01-05-2021 to 30-05-2022</label></h6>
                                                
                                        </div>
                                        <div class="col-md-2 offset-md-2">
                                            <button id="test" class="btn btn-success btn-sm"> Reset </button>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chartPie" style="width: 100%;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3 mb-3">
                        <div class="col-lg-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-primary">Location Based Analysis</h6>
                                    <hr>

                                    <canvas id="canvas"></canvas>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-5 col-md-6">
                                            <h6 class="card-title text-primary">Age Based Analysis</h6>
                                        </div>
                                        <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
                                            <select id="age_location_list" onchange="location_based_age_graph();"
                                                data-max-options="5" data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chart" width="400" height="200"></canvas>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-5 col-md-6">
                                            <h6 class="card-title text-primary">Revenue Distribution Over Time</h6>
                                        </div>
                                        <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
                                            <select id="revenue_location_list"
                                                onchange="location_based_revenue_graph();" data-max-options="5"
                                                data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chartLine" style="width:100%"></canvas>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <div class="tab-pane fade" id="nav-exeutive" role="tabpanel" aria-labelledby="nav-profile-tab">
            <div class="container">
                <div class="row mt-3 mb-3">
                    <div class="col-md-12 mb-3">
                        <div class="card rounded-0 h-100">
                            <div class="card-body w-100">
                                <h6 class="card-title text-primary text-center">Executive Summary for <label class="text-secondary">Brasserie Blanc Bath</label>, Year 2021</h6>
                                <hr>
                                <div id="fa_loading" style="text-align: center;display: none;">
                                    <i class="fa fa-spinner fa-spin" style="font-size:24px;color:blue;"></i>
                                </div>
                                <div class="card-group">
                                    <div class="card">
                                        <div class="card-body">
                                            <select class="form-select" aria-label="Default select example">
                                                <option selected="selected" value="green">Standard</option>
                                                <option value="blue">Customised</option>
                                            </select>
                                            <br>
                                            <div class="green box">
                                                <input type="month" class="form-control">
                                            </div>
                                            <div class="blue box">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text">From</span>
                                                    <input type="date" class="form-control">
                                                    <span class="input-group-text">To</span>
                                                    <input type="date" class="form-control">
                                                </div>
                                            </div>

                                        </div> 
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 className="text-secondary">Location <span><i class="fa fa-filter"
                                                        aria-hidden="true"></i></span></h5> <br>
                                            <select id="excutive_summary_list" class="border rounded" data-live-search="true" onchange="location_based_excutive_summary();"    data-width="100%">
                                                
                                            </select>
                                        </div>
                                    </div>
                                </div>


                                <table class="table table-bordered table-responsive" id="executive_summary" width="100">
                                    <tbody>
                                        <tr>
                                            <th class="col-3"></th>
                                            <th class="col-3 bg-secondary text-white">Selected</th>
                                            <th class="col-3 bg-secondary text-white">Previous</th>
                                            <th class="col-3 bg-secondary text-white">Change</th>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Customers</td>
                                            <td id="cus_sel">1,561</td>
                                            <td id="cus_pre">1,712</td>
                                            <td id="cus_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Orders</td>
                                            <td id="ord_sel">1,561</td>
                                            <td id="ord_pre">1,712</td>
                                            <td id="ord_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Revenue</td>
                                            <td id="rev_sel">1,561</td>
                                            <td id="rev_pre">1,712</td>
                                            <td id="rev_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Average Order Value</td>
                                            <td id="aov_sel">1,561</td>
                                            <td id="aov_pre">1,712</td>
                                            <td id="aov_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">New Customers</td>
                                            <td id="newcus_sel">1,561</td>
                                            <td id="newcus_pre">1,712</td>
                                            <td id="newcus_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Repeat Customers</td>
                                            <td id="rep_sel">1,561</td>
                                            <td id="rep_pre">1,712</td>
                                            <td id="rep_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Churned Customers</td>
                                            <td id="churn_sel">1,561</td>
                                            <td id="churn_pre">1,712</td>
                                            <td id="churn_cha">-9%</td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Avg Customer Lifetime Value</td>
                                            <td id="acl_sel">1,561</td>
                                            <td id="acl_pre">1,712</td>
                                            <td id="acl_cha">-9%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>