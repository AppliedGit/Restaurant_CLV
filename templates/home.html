<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.0.0/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.0/chartjs-adapter-moment.min.js"></script>
    <!-- <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script> -->
    <script src="https://rawgit.com/Anujarya300/bubble_maps/master/data/geography-data/datamaps.none.js"></script>

    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>


    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://rawgit.com/Anujarya300/bubble_maps/master/data/geography-data/datamaps.none.js"></script>

   

    <title>ADRA</title>
    <style>
        #customer_segmantation tr td:nth-child(1) {
            text-align: left;
        }

        #customer_segmantation tr td {
            font-size: 12px;
            padding: 8px !important;
            vertical-align: middle;
            text-align: center;
        }

        #customer_segmantation tr th {
            padding: 4px !important;
            margin: 4px !important;
            font-size: 13px;
            vertical-align: middle;
            text-align: center;
        }

        #customer_segmantation tr td:nth-child(2),
        #customer_segmantation tr td:nth-child(3),
        #customer_segmantation tr td:nth-child(4),
        #customer_segmantation tr td:nth-child(5),
        #customer_segmantation tr td:nth-child(6) {
            font-size: 13px;
            color: grey;
        }

        #executive_summary tr td {
            font-size: 14px;
            padding: 10px !important;
            vertical-align: middle;
            text-align: center;
        }

        #executive_summary tr th {
            padding: 8px !important;
            margin: 8px !important;
            font-size: 15px;
            vertical-align: middle;
            text-align: center;
        }

        .active {
            color: #19875f !important;
        }

        #fa_loading {
            position: absolute;
            display: flex;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2;
            cursor: pointer;

        }

        .dropdown-item.active,
        .dropdown-item:active {
            background-color: #a3a3a3;
            ;
        }
    </style>
    <script type="text/javascript">

        var prediction_graph, age_based_analytics_graph, revenue_graph;

        var avg_clv, number_of_cus, value_of_revenue = [];

        

        let bubbles_clv = [
                {
                    latitude: 51.471,
                    longitude: -2.244,
                    fillKey: "MAJOR",
                    radius: 10.3,
                    state: "Brasserie Blanc Bath",
                    averageCLV: 103.82,
                    loyalCustomerPercentage: 1.4,
                    averageLoyalCLV: 293.60,
                    numberOfNewCustomer: 3799,
                    numberOfRepeatCustomer: 214,
                    revenueFromRepeatCustomer: 18838.30
                },
                {
                    latitude: 51.606,
                    longitude: -0.623,
                    fillKey: "MAJOR",
                    radius: 16.1,
                    state: "Brasserie Blanc Beaconsfield",
                    averageCLV: 161.46,
                    loyalCustomerPercentage: 8.9,
                    averageLoyalCLV: 492.88,
                    numberOfNewCustomer: 19950,
                    numberOfRepeatCustomer: 5455,
                    revenueFromRepeatCustomer: 567118.65
                }, {
                    latitude: 50.715,
                    longitude: -1.882,
                    fillKey: "MAJOR",
                    radius: 12.9,
                    state: "Brasserie Blanc Bournemouth",
                    averageCLV: 129.78,
                    loyalCustomerPercentage: 4.5,
                    averageLoyalCLV: 492.43,
                    numberOfNewCustomer: 14599,
                    numberOfRepeatCustomer: 2080,
                    revenueFromRepeatCustomer: 218391.97
                }, {
                    latitude: 51.515,
                    longitude: -0.111,
                    fillKey: "MAJOR",
                    radius: 16.8,
                    state: "Brasserie Blanc Chancery Lane",
                    averageCLV: 168.05,
                    loyalCustomerPercentage: 2.9,
                    averageLoyalCLV: 454.75,
                    numberOfNewCustomer: 7747,
                    numberOfRepeatCustomer: 752,
                    revenueFromRepeatCustomer: 85944.16
                },
                {
                    latitude: 51.897,
                    longitude: -2.08,
                    fillKey: "MAJOR",
                    radius: 16.1,
                    state: "Brasserie Blanc Cheltenham",
                    averageCLV: 161.57,
                    loyalCustomerPercentage: 6.9,
                    averageLoyalCLV: 531.96,
                    numberOfNewCustomer: 17737,
                    numberOfRepeatCustomer: 3634,
                    revenueFromRepeatCustomer: 412922.24
                }, {
                    latitude: 50.837,
                    longitude: -0.773,
                    fillKey: "MAJOR",
                    radius: 14.9,
                    state: "Brasserie Blanc Chichester",
                    averageCLV: 149.62,
                    loyalCustomerPercentage: 8.3,
                    averageLoyalCLV: 500.37,
                    numberOfNewCustomer: 11780,
                    numberOfRepeatCustomer: 2615,
                    revenueFromRepeatCustomer: 250062.36
                },
                {
                    latitude: 53.364,
                    longitude: -2.297,
                    fillKey: "MAJOR",
                    radius: 10.9,
                    state: "Brasserie Blanc Hale Barns",
                    averageCLV: 109.02,
                    loyalCustomerPercentage: 1.7,
                    averageLoyalCLV: 384.19,
                    numberOfNewCustomer: 3187,
                    numberOfRepeatCustomer: 204,
                    revenueFromRepeatCustomer: 19704.55
                },
                {
                    latitude: 53.305,
                    longitude: -2.373,
                    fillKey: "MAJOR",
                    radius: 11.9,
                    state: "Brasserie Blanc Knutsford",
                    averageCLV: 119.80,
                    loyalCustomerPercentage: 2.2,
                    averageLoyalCLV: 367.37,
                    numberOfNewCustomer: 2373,
                    numberOfRepeatCustomer: 251,
                    revenueFromRepeatCustomer: 24366.51
                },
                {
                    latitude: 53.793,
                    longitude: -1.544,
                    fillKey: "MAJOR",
                    radius: 17.4,
                    state: "Brasserie Blanc Leeds",
                    averageCLV: 174.25,
                    loyalCustomerPercentage: 6.3,
                    averageLoyalCLV: 561.71,
                    numberOfNewCustomer: 11193,
                    numberOfRepeatCustomer: 2293,
                    revenueFromRepeatCustomer: 276408.37
                },
                {
                    latitude: 52.037,
                    longitude: -0.762,
                    fillKey: "MAJOR",
                    radius: 16.9,
                    state: "Brasserie Blanc Milton Keynes",
                    averageCLV: 169.82,
                    loyalCustomerPercentage: 7.3,
                    averageLoyalCLV: 557.56,
                    numberOfNewCustomer: 10601,
                    numberOfRepeatCustomer: 2213,
                    revenueFromRepeatCustomer: 244684.06
                },
                {
                    latitude: 51.761,
                    longitude: -1.267,
                    fillKey: "MAJOR",
                    radius: 14.7,
                    state: "Brasserie Blanc Oxford",
                    averageCLV: 147.04,
                    loyalCustomerPercentage: 5.7,
                    averageLoyalCLV: 493.16,
                    numberOfNewCustomer: 14829,
                    numberOfRepeatCustomer: 2492,
                    revenueFromRepeatCustomer: 254651.00
                },
                {
                    latitude: 50.796,
                    longitude: -1.103,
                    fillKey: "MAJOR",
                    radius: 15,
                    state: "Brasserie Blanc Portsmouth",
                    averageCLV: 150.99,
                    loyalCustomerPercentage: 5.7,
                    averageLoyalCLV: 539.61,
                    numberOfNewCustomer: 11751,
                    numberOfRepeatCustomer: 2008,
                    revenueFromRepeatCustomer: 218991.96
                },
                {
                    latitude: 51.506,
                    longitude: -0.114,
                    fillKey: "MAJOR",
                    radius: 14.2,
                    state: "Brasserie Blanc Southbank",
                    averageCLV: 142.80,
                    loyalCustomerPercentage: 3.3,
                    averageLoyalCLV: 446.57,
                    numberOfNewCustomer: 19773,
                    numberOfRepeatCustomer: 2144,
                    revenueFromRepeatCustomer: 225476.47
                },
                {
                    latitude: 51.514,
                    longitude: -0.086,
                    fillKey: "MAJOR",
                    radius: 16.4,
                    state: "Brasserie Blanc Threadneedle Street",
                    averageCLV: 164.138,
                    loyalCustomerPercentage: 2.7,
                    averageLoyalCLV: 443.38,
                    numberOfNewCustomer: 9077,
                    numberOfRepeatCustomer: 978,
                    revenueFromRepeatCustomer: 109083.45
                },
                {
                    latitude: 51.512,
                    longitude: -0.071,
                    fillKey: "MAJOR",
                    radius: 15.3,
                    state: "Brasserie Blanc Tower of London",
                    averageCLV: 153.56,
                    loyalCustomerPercentage: 0.5,
                    averageLoyalCLV: 513.99,
                    numberOfNewCustomer: 2983,
                    numberOfRepeatCustomer: 132,
                    revenueFromRepeatCustomer: 20111.86
                },
                {
                    latitude: 51.065,
                    longitude: -1.315,
                    fillKey: "MAJOR",
                    radius: 14.8,
                    state: "Brasserie Blanc Winchester",
                    averageCLV: 148.608,
                    loyalCustomerPercentage: 5.3,
                    averageLoyalCLV: 487.30,
                    numberOfNewCustomer: 15003,
                    numberOfRepeatCustomer: 2501,
                    revenueFromRepeatCustomer: 266006.14
                },
                {
                    latitude: 51.488,
                    longitude: -0.226,
                    fillKey: "MAJOR",
                    radius: 16.4,
                    state: "Fulham Reach",
                    averageCLV: 164.72,
                    loyalCustomerPercentage: 5.1,
                    averageLoyalCLV: 559.47,
                    numberOfNewCustomer: 7168,
                    numberOfRepeatCustomer: 1149,
                    revenueFromRepeatCustomer: 139296.05
                },
                {
                    latitude: 51.237,
                    longitude: -0.206,
                    fillKey: "MAJOR",
                    radius: 15.9,
                    state: "Reigate",
                    averageCLV: 159.43,
                    loyalCustomerPercentage: 8.2,
                    averageLoyalCLV: 493.96,
                    numberOfNewCustomer: 10235,
                    numberOfRepeatCustomer: 2532,
                    revenueFromRepeatCustomer: 268076.73
                },
                {
                    latitude: 51.244,
                    longitude: -0.005,
                    fillKey: "MAJOR",
                    radius: 15.5,
                    state: "The Barley Mow",
                    averageCLV: 155.92,
                    loyalCustomerPercentage: 9,
                    averageLoyalCLV: 528.78,
                    numberOfNewCustomer: 9169,
                    numberOfRepeatCustomer: 2307,
                    revenueFromRepeatCustomer: 235017.34
                },
                {
                    latitude: 51.747,
                    longitude: -0.977,
                    fillKey: "MAJOR",
                    radius: 17.7,
                    state: "The Black Horse - Thame",
                    averageCLV: 177.81,
                    loyalCustomerPercentage: 10.6,
                    averageLoyalCLV: 535.91,
                    numberOfNewCustomer: 15387,
                    numberOfRepeatCustomer: 4549,
                    revenueFromRepeatCustomer: 499212.87
                },
                {
                    latitude: 51.97,
                    longitude: -0.855,
                    fillKey: "MAJOR",
                    radius: 16.9,
                    state: "The Boot",
                    averageCLV: 169.90,
                    loyalCustomerPercentage: 11.3,
                    averageLoyalCLV: 517.18,
                    numberOfNewCustomer: 12737,
                    numberOfRepeatCustomer: 4171,
                    revenueFromRepeatCustomer: 425112.25
                },
                {
                    latitude: 52.131,
                    longitude: 0.246,
                    fillKey: "MAJOR",
                    radius: 18.0,
                    state: "The British Queen",
                    averageCLV: 180.21,
                    loyalCustomerPercentage: 7.6,
                    averageLoyalCLV: 568.35,
                    numberOfNewCustomer: 4449,
                    numberOfRepeatCustomer: 1076,
                    revenueFromRepeatCustomer: 125838.30
                },
                {
                    latitude: 51.03,
                    longitude: -0.958,
                    fillKey: "MAJOR",
                    radius: 14.0,
                    state: "The Cricketers",
                    averageCLV: 140.42,
                    loyalCustomerPercentage: 7.6,
                    averageLoyalCLV: 454.64,
                    numberOfNewCustomer: 13323,
                    numberOfRepeatCustomer: 3084,
                    revenueFromRepeatCustomer: 296301.25
                },
                {
                    latitude: 51.778,
                    longitude: 0.382,
                    fillKey: "MAJOR",
                    radius: 17.6,
                    state: "The Hare",
                    averageCLV: 176.91,
                    loyalCustomerPercentage: 11.1,
                    averageLoyalCLV: 521.02,
                    numberOfNewCustomer: 8780,
                    numberOfRepeatCustomer: 2977,
                    revenueFromRepeatCustomer: 312597.08
                },
                {
                    latitude: 52.238,
                    longitude: -0.156,
                    fillKey: "MAJOR",
                    radius: 16.3,
                    state: "The Highwayman",
                    averageCLV: 163.23,
                    loyalCustomerPercentage: 8.8,
                    averageLoyalCLV: 518.96,
                    numberOfNewCustomer: 9400,
                    numberOfRepeatCustomer: 2581,
                    revenueFromRepeatCustomer: 273558.95
                },
                {
                    latitude: 51.558,
                    longitude: 0.274,
                    fillKey: "MAJOR",
                    radius: 19.1,
                    state: "The Jobber's Rest",
                    averageCLV: 191.81,
                    loyalCustomerPercentage: 13.7,
                    averageLoyalCLV: 570.31,
                    numberOfNewCustomer: 10806,
                    numberOfRepeatCustomer: 4158,
                    revenueFromRepeatCustomer: 441825.86
                },
                {
                    latitude: 51.655,
                    longitude: -0.107,
                    fillKey: "MAJOR",
                    radius: 18.1,
                    state: "The Jolly Farmer",
                    averageCLV: 181.61,
                    loyalCustomerPercentage: 12.5,
                    averageLoyalCLV: 532.96,
                    numberOfNewCustomer: 5816,
                    numberOfRepeatCustomer: 2080,
                    revenueFromRepeatCustomer: 215648.86
                },
                {
                    latitude: 51.807,
                    longitude: -0.492,
                    fillKey: "MAJOR",
                    radius: 16.1,
                    state: "The King's Arms",
                    averageCLV: 161.62,
                    loyalCustomerPercentage: 9.7,
                    averageLoyalCLV: 498.43,
                    numberOfNewCustomer: 8658,
                    numberOfRepeatCustomer: 2538,
                    revenueFromRepeatCustomer: 259201.02
                },
                {
                    latitude: 51.47,
                    longitude: -0.521,
                    fillKey: "MAJOR",
                    radius: 18.7,
                    state: "The Kings Head",
                    averageCLV: 187.66,
                    loyalCustomerPercentage: 11.4,
                    averageLoyalCLV: 554.12,
                    numberOfNewCustomer: 11642,
                    numberOfRepeatCustomer: 3920,
                    revenueFromRepeatCustomer: 439083.54
                },
                {
                    latitude: 51.278,
                    longitude: -0.511,
                    fillKey: "MAJOR",
                    radius: 15.8,
                    state: "The March Hare",
                    averageCLV: 158.68,
                    loyalCustomerPercentage: 7.4,
                    averageLoyalCLV: 484.89,
                    numberOfNewCustomer: 17338,
                    numberOfRepeatCustomer: 4162,
                    revenueFromRepeatCustomer: 453726.17
                },
                {
                    latitude: 51.67,
                    longitude: -0.497,
                    fillKey: "MAJOR",
                    radius: 15.4,
                    state: "The Oaks",
                    averageCLV: 154.08,
                    loyalCustomerPercentage: 9.1,
                    averageLoyalCLV: 525.04,
                    numberOfNewCustomer: 14740,
                    numberOfRepeatCustomer: 3721,
                    revenueFromRepeatCustomer: 375815.65
                },
                {
                    latitude: 51.429,
                    longitude: -0.935,
                    fillKey: "MAJOR",
                    radius: 13.7,
                    state: "The Oakwood",
                    averageCLV: 137.77,
                    loyalCustomerPercentage: 3,
                    averageLoyalCLV: 393.08,
                    numberOfNewCustomer: 2062,
                    numberOfRepeatCustomer: 230,
                    revenueFromRepeatCustomer: 28099.98
                },
                {
                    latitude: 51.385,
                    longitude: -0.56,
                    fillKey: "MAJOR",
                    radius: 16.9,
                    state: "The Queens Head",
                    averageCLV: 169.14,
                    loyalCustomerPercentage: 9,
                    averageLoyalCLV: 543.46,
                    numberOfNewCustomer: 10735,
                    numberOfRepeatCustomer: 2863,
                    revenueFromRepeatCustomer: 318708.72
                },
                {
                    latitude: 51.063,
                    longitude: -0.326,
                    fillKey: "MAJOR",
                    radius: 15.9,
                    state: "The Red Deer",
                    averageCLV: 159.79,
                    loyalCustomerPercentage: 7.7,
                    averageLoyalCLV: 476.77,
                    numberOfNewCustomer: 10151,
                    numberOfRepeatCustomer: 2575,
                    revenueFromRepeatCustomer: 274943.31
                },
                {
                    latitude: 51.372,
                    longitude: -0.468,
                    fillKey: "MAJOR",
                    radius: 16.4,
                    state: "The Sun Inn",
                    averageCLV: 164.56,
                    loyalCustomerPercentage: 11.1,
                    averageLoyalCLV: 525.81,
                    numberOfNewCustomer: 11303,
                    numberOfRepeatCustomer: 3624,
                    revenueFromRepeatCustomer: 365301.47
                }, {
                    latitude: 51.507,
                    longitude: -0.945,
                    fillKey: "MAJOR",
                    radius: 17.6,
                    state: "The Victoria",
                    averageCLV: 176.05,
                    loyalCustomerPercentage: 4.5,
                    averageLoyalCLV: 610.83,
                    numberOfNewCustomer: 1550,
                    numberOfRepeatCustomer: 214,
                    revenueFromRepeatCustomer: 30647.78
                },
                {
                    latitude: 51.546,
                    longitude: -0.025,
                    fillKey: "MAJOR",
                    radius: 17.6,
                    state: "The White Bear",
                    averageCLV: 176.19,
                    loyalCustomerPercentage: 13.1,
                    averageLoyalCLV: 491.71,
                    numberOfNewCustomer: 8848,
                    numberOfRepeatCustomer: 3342,
                    revenueFromRepeatCustomer: 329375.72
                }
            ]
        
        let bubbles_revenue = [
                {
                    latitude: 51.471,
                    longitude: -2.244,
                    fillKey: "MINOR",
                    radius: 1.88,
                    state: "Brasserie Blanc Bath",
                    averageCLV: 103.82,
                    loyalCustomerPercentage: 1.4,
                    averageLoyalCLV: 293.60,
                    numberOfNewCustomer: 3799,
                    numberOfRepeatCustomer: 214,
                    revenueFromRepeatCustomer: 18838.30
                },
                {
                    latitude: 51.606,
                    longitude: -0.623,
                    fillKey: "MINOR",
                    radius: 56.711,
                    state: "Brasserie Blanc Beaconsfield",
                    averageCLV: 161.46,
                    loyalCustomerPercentage: 8.9,
                    averageLoyalCLV: 492.88,
                    numberOfNewCustomer: 19950,
                    numberOfRepeatCustomer: 5455,
                    revenueFromRepeatCustomer: 567118.65
                }, {
                    latitude: 50.715,
                    longitude: -1.882,
                    fillKey: "MINOR",
                    radius: 21.8391,
                    state: "Brasserie Blanc Bournemouth",
                    averageCLV: 129.78,
                    loyalCustomerPercentage: 4.5,
                    averageLoyalCLV: 492.43,
                    numberOfNewCustomer: 14599,
                    numberOfRepeatCustomer: 2080,
                    revenueFromRepeatCustomer: 218391.97
                }, {
                    latitude: 51.515,
                    longitude: -0.111,
                    fillKey: "MINOR",
                    radius: 8.5944,
                    state: "Brasserie Blanc Chancery Lane",
                    averageCLV: 168.05,
                    loyalCustomerPercentage: 2.9,
                    averageLoyalCLV: 454.75,
                    numberOfNewCustomer: 7747,
                    numberOfRepeatCustomer: 752,
                    revenueFromRepeatCustomer: 85944.16
                },
                {
                    latitude: 51.897,
                    longitude: -2.08,
                    fillKey: "MINOR",
                    radius: 41.2922,
                    state: "Brasserie Blanc Cheltenham",
                    averageCLV: 161.57,
                    loyalCustomerPercentage: 6.9,
                    averageLoyalCLV: 531.96,
                    numberOfNewCustomer: 17737,
                    numberOfRepeatCustomer: 3634,
                    revenueFromRepeatCustomer: 412922.24
                }, {
                    latitude: 50.837,
                    longitude: -0.773,
                    fillKey: "MINOR",
                    radius: 25.0062,
                    state: "Brasserie Blanc Chichester",
                    averageCLV: 149.62,
                    loyalCustomerPercentage: 8.3,
                    averageLoyalCLV: 500.37,
                    numberOfNewCustomer: 11780,
                    numberOfRepeatCustomer: 2615,
                    revenueFromRepeatCustomer: 250062.36
                },
                {
                    latitude: 53.364,
                    longitude: -2.297,
                    fillKey: "MINOR",
                    radius: 1.9704,
                    state: "Brasserie Blanc Hale Barns",
                    averageCLV: 109.02,
                    loyalCustomerPercentage: 1.7,
                    averageLoyalCLV: 384.19,
                    numberOfNewCustomer: 3187,
                    numberOfRepeatCustomer: 204,
                    revenueFromRepeatCustomer: 19704.55
                },
                {
                    latitude: 53.305,
                    longitude: -2.373,
                    fillKey: "MINOR",
                    radius: 2.4366,
                    state: "Brasserie Blanc Knutsford",
                    averageCLV: 119.80,
                    loyalCustomerPercentage: 2.2,
                    averageLoyalCLV: 367.37,
                    numberOfNewCustomer: 2373,
                    numberOfRepeatCustomer: 251,
                    revenueFromRepeatCustomer: 24366.51
                },
                {
                    latitude: 53.793,
                    longitude: -1.544,
                    fillKey: "MINOR",
                    radius: 27.6408,
                    state: "Brasserie Blanc Leeds",
                    averageCLV: 174.25,
                    loyalCustomerPercentage: 6.3,
                    averageLoyalCLV: 561.71,
                    numberOfNewCustomer: 11193,
                    numberOfRepeatCustomer: 2293,
                    revenueFromRepeatCustomer: 276408.37
                },
                {
                    latitude: 52.037,
                    longitude: -0.762,
                    fillKey: "MINOR",
                    radius: 24.4684,
                    state: "Brasserie Blanc Milton Keynes",
                    averageCLV: 169.82,
                    loyalCustomerPercentage: 7.3,
                    averageLoyalCLV: 557.56,
                    numberOfNewCustomer: 10601,
                    numberOfRepeatCustomer: 2213,
                    revenueFromRepeatCustomer: 244684.06
                },
                {
                    latitude: 51.761,
                    longitude: -1.267,
                    fillKey: "MINOR",
                    radius: 25.4651,
                    state: "Brasserie Blanc Oxford",
                    averageCLV: 147.04,
                    loyalCustomerPercentage: 5.7,
                    averageLoyalCLV: 493.16,
                    numberOfNewCustomer: 14829,
                    numberOfRepeatCustomer: 2492,
                    revenueFromRepeatCustomer: 254651.03
                },
                {
                    latitude: 50.796,
                    longitude: -1.103,
                    fillKey: "MINOR",
                    radius: 21.8991,
                    state: "Brasserie Blanc Portsmouth",
                    averageCLV: 150.99,
                    loyalCustomerPercentage: 5.7,
                    averageLoyalCLV: 539.61,
                    numberOfNewCustomer: 11751,
                    numberOfRepeatCustomer: 2008,
                    revenueFromRepeatCustomer: 218991.96
                },
                {
                    latitude: 51.506,
                    longitude: -0.114,
                    fillKey: "MINOR",
                    radius: 22.5476,
                    state: "Brasserie Blanc Southbank",
                    averageCLV: 142.80,
                    loyalCustomerPercentage: 3.3,
                    averageLoyalCLV: 446.57,
                    numberOfNewCustomer: 19773,
                    numberOfRepeatCustomer: 2144,
                    revenueFromRepeatCustomer: 225476.47
                },
                {
                    latitude: 51.514,
                    longitude: -0.086,
                    fillKey: "MINOR",
                    radius: 10.9083,
                    state: "Brasserie Blanc Threadneedle Street",
                    averageCLV: 164.13,
                    loyalCustomerPercentage: 2.7,
                    averageLoyalCLV: 443.38,
                    numberOfNewCustomer: 9077,
                    numberOfRepeatCustomer: 978,
                    revenueFromRepeatCustomer: 109083.45
                },
                {
                    latitude: 51.512,
                    longitude: -0.071,
                    fillKey: "MINOR",
                    radius: 2.0111,
                    state: "Brasserie Blanc Tower of London",
                    averageCLV: 153.56,
                    loyalCustomerPercentage: 0.5,
                    averageLoyalCLV: 513.993,
                    numberOfNewCustomer: 2983,
                    numberOfRepeatCustomer: 132,
                    revenueFromRepeatCustomer: 20111.86
                },
                {
                    latitude: 51.065,
                    longitude: -1.315,
                    fillKey: "MINOR",
                    radius: 26.6006,
                    state: "Brasserie Blanc Winchester",
                    averageCLV: 148.60,
                    loyalCustomerPercentage: 5.3,
                    averageLoyalCLV: 487.30,
                    numberOfNewCustomer: 15003,
                    numberOfRepeatCustomer: 2501,
                    revenueFromRepeatCustomer: 266006.14
                },
                {
                    latitude: 51.488,
                    longitude: -0.226,
                    fillKey: "MINOR",
                    radius: 13.92964,
                    state: "Fulham Reach",
                    averageCLV: 164.72,
                    loyalCustomerPercentage: 5.1,
                    averageLoyalCLV: 559.47,
                    numberOfNewCustomer: 7168,
                    numberOfRepeatCustomer: 1149,
                    revenueFromRepeatCustomer: 139296.05
                },
                {
                    latitude: 51.237,
                    longitude: -0.206,
                    fillKey: "MINOR",
                    radius: 26.8076,
                    state: "Reigate",
                    averageCLV: 159.43,
                    loyalCustomerPercentage: 8.2,
                    averageLoyalCLV: 493.96,
                    numberOfNewCustomer: 10235,
                    numberOfRepeatCustomer: 2532,
                    revenueFromRepeatCustomer: 268076.73
                },
                {
                    latitude: 51.244,
                    longitude: -0.005,
                    fillKey: "MINOR",
                    radius: 23.5017,
                    state: "The Barley Mow",
                    averageCLV: 155.92,
                    loyalCustomerPercentage: 9,
                    averageLoyalCLV: 528.78,
                    numberOfNewCustomer: 9169,
                    numberOfRepeatCustomer: 2307,
                    revenueFromRepeatCustomer: 235017.34
                },
                {
                    latitude: 51.747,
                    longitude: -0.977,
                    fillKey: "MINOR",
                    radius: 49.9212,
                    state: "The Black Horse - Thame",
                    averageCLV: 177.81,
                    loyalCustomerPercentage: 10.6,
                    averageLoyalCLV: 535.91,
                    numberOfNewCustomer: 15387,
                    numberOfRepeatCustomer: 4549,
                    revenueFromRepeatCustomer: 499212.87
                },
                {
                    latitude: 51.97,
                    longitude: -0.855,
                    fillKey: "MINOR",
                    radius: 42.5112,
                    state: "The Boot",
                    averageCLV: 169.90,
                    loyalCustomerPercentage: 11.3,
                    averageLoyalCLV: 517.18,
                    numberOfNewCustomer: 12737,
                    numberOfRepeatCustomer: 4171,
                    revenueFromRepeatCustomer: 425112.25
                },
                {
                    latitude: 52.131,
                    longitude: 0.246,
                    fillKey: "MINOR",
                    radius: 12.5838,
                    state: "The British Queen",
                    averageCLV: 180.21,
                    loyalCustomerPercentage: 7.6,
                    averageLoyalCLV: 568.35,
                    numberOfNewCustomer: 4449,
                    numberOfRepeatCustomer: 1076,
                    revenueFromRepeatCustomer: 125838.30
                },
                {
                    latitude: 51.03,
                    longitude: -0.958,
                    fillKey: "MINOR",
                    radius: 29.6301,
                    state: "The Cricketers",
                    averageCLV: 140.42,
                    loyalCustomerPercentage: 7.6,
                    averageLoyalCLV: 454.64,
                    numberOfNewCustomer: 13323,
                    numberOfRepeatCustomer: 3084,
                    revenueFromRepeatCustomer: 296301.25
                },
                {
                    latitude: 51.778,
                    longitude: 0.382,
                    fillKey: "MINOR",
                    radius: 31.2597,
                    state: "The Hare",
                    averageCLV: 176.91,
                    loyalCustomerPercentage: 11.1,
                    averageLoyalCLV: 521.02,
                    numberOfNewCustomer: 8780,
                    numberOfRepeatCustomer: 2977,
                    revenueFromRepeatCustomer: 312597.08
                },
                {
                    latitude: 52.238,
                    longitude: -0.156,
                    fillKey: "MINOR",
                    radius: 27.3558,
                    state: "The Highwayman",
                    averageCLV: 163.23,
                    loyalCustomerPercentage: 8.8,
                    averageLoyalCLV: 518.96,
                    numberOfNewCustomer: 9400,
                    numberOfRepeatCustomer: 2581,
                    revenueFromRepeatCustomer: 273558.95
                },
                {
                    latitude: 51.558,
                    longitude: 0.274,
                    fillKey: "MINOR",
                    radius: 44.1825,
                    state: "The Jobber's Rest",
                    averageCLV: 191.81,
                    loyalCustomerPercentage: 13.7,
                    averageLoyalCLV: 570.31,
                    numberOfNewCustomer: 10806,
                    numberOfRepeatCustomer: 4158,
                    revenueFromRepeatCustomer: 441825.86
                },
                {
                    latitude: 51.655,
                    longitude: -0.107,
                    fillKey: "MINOR",
                    radius: 21.5648,
                    state: "The Jolly Farmer",
                    averageCLV: 181.61,
                    loyalCustomerPercentage: 12.5,
                    averageLoyalCLV: 532.96,
                    numberOfNewCustomer: 5816,
                    numberOfRepeatCustomer: 2080,
                    revenueFromRepeatCustomer: 215648.86
                },
                {
                    latitude: 51.807,
                    longitude: -0.492,
                    fillKey: "MINOR",
                    radius: 25.9201,
                    state: "The King's Arms",
                    averageCLV: 161.62,
                    loyalCustomerPercentage: 9.7,
                    averageLoyalCLV: 498.43,
                    numberOfNewCustomer: 8658,
                    numberOfRepeatCustomer: 2538,
                    revenueFromRepeatCustomer: 259201.02
                },
                {
                    latitude: 51.47,
                    longitude: -0.521,
                    fillKey: "MINOR",
                    radius: 43.9083,
                    state: "The Kings Head",
                    averageCLV: 187.66,
                    loyalCustomerPercentage: 11.4,
                    averageLoyalCLV: 554.12,
                    numberOfNewCustomer: 11642,
                    numberOfRepeatCustomer: 3920,
                    revenueFromRepeatCustomer: 439083.54
                },
                {
                    latitude: 51.278,
                    longitude: -0.511,
                    fillKey: "MINOR",
                    radius: 45.3726,
                    state: "The March Hare",
                    averageCLV: 158.68,
                    loyalCustomerPercentage: 7.4,
                    averageLoyalCLV: 484.89,
                    numberOfNewCustomer: 17338,
                    numberOfRepeatCustomer: 4162,
                    revenueFromRepeatCustomer: 453726.17
                },
                {
                    latitude: 51.67,
                    longitude: -0.497,
                    fillKey: "MINOR",
                    radius: 37.5815,
                    state: "The Oaks",
                    averageCLV: 154.08,
                    loyalCustomerPercentage: 9.1,
                    averageLoyalCLV: 525.04,
                    numberOfNewCustomer: 14740,
                    numberOfRepeatCustomer: 3721,
                    revenueFromRepeatCustomer: 375815.65
                },
                {
                    latitude: 51.429,
                    longitude: -0.935,
                    fillKey: "MINOR",
                    radius: 2.8099,
                    state: "The Oakwood",
                    averageCLV: 137.77,
                    loyalCustomerPercentage: 3,
                    averageLoyalCLV: 393.08,
                    numberOfNewCustomer: 2062,
                    numberOfRepeatCustomer: 230,
                    revenueFromRepeatCustomer: 28099.98
                },
                {
                    latitude: 51.385,
                    longitude: -0.56,
                    fillKey: "MINOR",
                    radius: 31.8708,
                    state: "The Queens Head",
                    averageCLV: 169.14,
                    loyalCustomerPercentage: 9,
                    averageLoyalCLV: 543.46,
                    numberOfNewCustomer: 10735,
                    numberOfRepeatCustomer: 2863,
                    revenueFromRepeatCustomer: 318708.72
                },
                {
                    latitude: 51.063,
                    longitude: -0.326,
                    fillKey: "MINOR",
                    radius: 27.4943,
                    state: "The Red Deer",
                    averageCLV: 159.79,
                    loyalCustomerPercentage: 7.7,
                    averageLoyalCLV: 476.77,
                    numberOfNewCustomer: 10151,
                    numberOfRepeatCustomer: 2575,
                    revenueFromRepeatCustomer: 274943.31
                },
                {
                    latitude: 51.372,
                    longitude: -0.468,
                    fillKey: "MINOR",
                    radius: 36.5301,
                    state: "The Sun Inn",
                    averageCLV: 164.56,
                    loyalCustomerPercentage: 11.1,
                    averageLoyalCLV: 525.81,
                    numberOfNewCustomer: 11303,
                    numberOfRepeatCustomer: 3624,
                    revenueFromRepeatCustomer: 365301.47
                }, {
                    latitude: 51.507,
                    longitude: -0.945,
                    fillKey: "MINOR",
                    radius: 3.06476,
                    state: "The Victoria",
                    averageCLV: 176.05,
                    loyalCustomerPercentage: 4.5,
                    averageLoyalCLV: 610.83,
                    numberOfNewCustomer: 1550,
                    numberOfRepeatCustomer: 214,
                    revenueFromRepeatCustomer: 30647.78
                },
                {
                    latitude: 51.546,
                    longitude: -0.025,
                    fillKey: "MINOR",
                    radius: 32.9375,
                    state: "The White Bear",
                    averageCLV: 176.19,
                    loyalCustomerPercentage: 13.1,
                    averageLoyalCLV: 491.71,
                    numberOfNewCustomer: 8848,
                    numberOfRepeatCustomer: 3342,
                    revenueFromRepeatCustomer: 329375.72
                }
            ]
        
        var bubble_map;

        $(document).ready(function () {
            const chart_age = document.querySelectorAll(".chart");
            const chart_revenue = document.querySelectorAll(".chartLine");
            const chartMuliaxis = document.querySelectorAll(".chartPie");


            bubble_map = new Datamap({
                element: document.getElementById('uk'),
                scope: 'GBR_adm2',
                geographyConfig: {
                    popupOnHover: false,
                    highlightOnHover: false,
                    borderColor: '#444',
                    borderWidth: 0.5,
                    dataUrl: 'https://raw.githubusercontent.com/deldersveld/topojson/master/countries/united-kingdom/uk-counties.json'
                    //dataJson: topoJsonData
                },
                fills: {
                    'MAJOR': '#306596',
                    'MEDIUM': '#0fa0fa',
                    'MINOR': '#bada55',
                    defaultFill: '#dddddd'
                },
                setProjection: function (element) {
                    var projection = d3.geo.mercator()
                        .center([-1.0, 55]) // always in [East Latitude, North Longitude]
                        //                    .center([-5.961803, 55.780919]) // always in [East Latitude, North Longitude]
                        .scale(5000);
                    var path = d3.geo.path().projection(projection);
                    return { path: path, projection: projection };
                }
            });

            chart_age.forEach(function (chart) {
                var ctx = chart.getContext("2d");
                age_based_analytics_graph = new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: [],

                        datasets: [
                            {
                                label: "Revenue % (€)",
                                data: [],
                                borderColor: "rgba(54, 162, 235, 0.2)",
                                backgroundColor: "rgba(54, 162, 235, 0.2)",
                            },

                            {
                                label: "Unknown (€)",
                                hidden: true,
                                data: [],
                                borderColor: "rgba(255, 99, 132, 0.2)",
                                backgroundColor: "rgba(255, 99, 132, 0.2)",
                            }
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'Revenue % (€)'
                                }
                            },
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Age Group'
                                }
                            }
                        }, plugins: {
                            tooltip: {
                                callbacks: {
                                    // beforeTitle: function (context) {                                                        
                                    //     return 'No. of customer :' + number_of_cus[context[0].dataIndex];  
                                    // },
                                    // title:function(context){
                                    //   console.log(context[0].label);
                                    //   return `${context[0].label} Day: ${weekarray[context[0].dataIndex]}`
                                    // },
                                    // afterTitle: function (context) {                                        

                                    // },
                                    beforeBody: function (context) {
                                        return 'No. of customer :' + number_of_cus[context[0].dataIndex];
                                    },
                                    // beforeLabel:function(context){
                                    //      return 'Before Label'
                                    // },
                                    // afterLabel: function(context){
                                    //       return 'After Label'+context[0];
                                    // },
                                    afterBody: function (context) {
                                        return 'AVG. CLV (€):' + avg_clv[context[0].dataIndex];
                                    },
                                    afterFooter: function (context) {
                                        return 'Value of Revenue (€): ' + value_of_revenue[context[0].dataIndex];;
                                    },

                                }
                            }
                        }
                    },
                });
            });

            chart_revenue.forEach(function (chart) {
                var ctx = chart.getContext("2d");
                revenue_graph = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: "AVG. Revenue (€)",
                                data: [],
                                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                borderColor: 'lightgreen',
                                tension: 0.4,
                                fill: true,
                                pointRadius: 2,
                                borderRadius: 2,
                                pointStyle: 'rect',
                                pointBorderColor: 'green',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            },
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'AVG. Revenue (€)'
                                }
                            },
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Day of the Week'
                                }
                            }
                        },plugins: {
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: false,
                                    },
                                    drag:{
                                        enabled:true
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'xy',
                                }
                            }
                        }
                    }, 
                });
            });

            chartMuliaxis.forEach(function (chart) {
                var ctx = chart.getContext("2d");

                prediction_graph = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: [],

                        datasets: [
                            {
                                label: "Total CLV (€)",
                                data: [],

                                backgroundColor: 'red',
                                borderColor: 'red',
                                tension: 0.4,
                                fill: false,
                                pointRadius: 0,
                                pointStyle: 'rect',
                                pointBorderColor: 'red',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            },
                            {
                                label: "Total Revenue (€)",
                                data: [],
                                backgroundColor: 'blue',
                                borderColor: 'blue',
                                tension: 0.4,
                                fill: false,
                                pointRadius: 0,
                                pointStyle: 'rect',
                                pointBorderColor: 'blue',
                                pointBackgroundColor: '#fff',
                                showLine: true
                            }
                        ],
                    },
                    options: {
                        scales:
                        {
                            y:
                            {
                                title:
                                {
                                    display: true, text: 'Total CLV & Total Revenue (€)'
                                }
                            }
                            ,
                            x:
                            {
                                title:
                                {
                                    display: true, text: 'Day of the Year'
                                }
                            }

                        },
                        plugins: {
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: false,
                                    },
                                    drag:{
                                        enabled:true
                                    },
                                   
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'xy',
                                }
                            }
                        }
                    }
                });
                $("#ts_series_reset").click(function () {
                    prediction_graph.resetZoom();
                });
                $("#revenue_reset").click(function () {
                    revenue_graph.resetZoom();
                });
            });

            display_dasboard_data();
            get_location();


            $("#selectpicker").change(function () {
                $(this).find("option:selected").each(function () {
                    var optionValue = $(this).attr("value");
                    if (optionValue) {
                        $(".box").not("." + optionValue).hide();
                        $("." + optionValue).show();
                    } else {
                        $(".box").hide();
                    }
                });
            }).change();

            // To style all selects
            $('.selectpicker').selectpicker();
            $('.selectpicker1').selectpicker();
            $('.selectpicker2').selectpicker();

        });


        function display_dasboard_data() {
            $.ajax({
                url: "/get_time_series_data",
                success: function (result) {


                    prediction_graph.data.labels = result["prediction_graph"]["day_of_year"];
                    prediction_graph.data.datasets[0]["data"] = result["prediction_graph"]["prediction_val"];
                    prediction_graph.data.datasets[1]["data"] = result["prediction_graph"]["transaction_val"];
                    prediction_graph.update();


                    var analytics_label_arr = result["analytics_graph"]["age_category"];
                    analytics_label_arr[7] = "Unknown";
                    age_based_analytics_graph.data.labels = analytics_label_arr;
                    age_based_analytics_graph.data.datasets[0]["data"] = result["analytics_graph"]["age_category_rev_percentage"];
                    age_based_analytics_graph.data.datasets[1]["data"] = [0, 0, 0, 0, 0, 0, 0, parseFloat(result["analytics_graph_unknown"])];
                    age_based_analytics_graph.update();

                    avg_clv = result["analytics_graph"]["avg_clv"];
                    number_of_cus = result["analytics_graph"]["no_cus_age_group"];
                    value_of_revenue = result["analytics_graph"]["val_of_revenue"];

                    avg_clv[7] = result["unknown_avg_clv"];
                    number_of_cus[7] = result["unknown_tot_cus"];
                    value_of_revenue[7] = result["unknown_val_of_rev"];

                    for (var i = 0; i < avg_clv.length; i++) {
                        avg_clv[i] = display_float_value(avg_clv[i]);
                        number_of_cus[i] = display_int_value(number_of_cus[i]);
                        value_of_revenue[i] = display_float_value(value_of_revenue[i]);
                    }



                    var revenue_graph_values = result["revenue_graph"]["transaction_value"];
                    for (var i = 0; i < revenue_graph_values.length; i++) {
                        revenue_graph_values[i] = display_float_value(revenue_graph_values[i]);
                    }

                    revenue_graph.data.labels = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                    revenue_graph.data.datasets[0]["data"] = revenue_graph_values;
                    revenue_graph.update();

                    fill_segment_table_data(result);

                    fill_executive_summary_data(result);

                    display_map(result["prediction_graph"]);
                    change_map_data('clv');

                }
            });

        }

        function get_location() {
            $.ajax({
                url: "/get_location",
                success: function (result) {
                    for (var i = 0; i < result.length; i++) {
                        $("#segment_location_list").append("<option >" + result[i] + "</option>");
                        $("#age_location_list").append("<option >" + result[i] + "</option>");
                        $("#revenue_location_list").append("<option >" + result[i] + "</option>");
                        $("#excutive_summary_list").append("<option >" + result[i] + "</option>");

                    }

                    $("#age_location_list").selectpicker();
                    $("#revenue_location_list").selectpicker();
                    $("#segment_location_list").selectpicker();
                    $("#excutive_summary_list").selectpicker();

                }
            });
        }


        function location_based_customer_segmentation() {
            var location = $("#segment_location_list :selected").text();
            $.ajax({
                url: "/location_based_segment_data?location=" + location,
                success: function (result) {
                    fill_segment_table_data(result);

                    // $("#loy_users").text(result["loyal_cus_clv"]["users"]);
                    // $("#loy_freq").text(result["loyal_cus_clv"]["frequency"]);
                    // $("#loy_aov").text(result["loyal_cus_clv"]["aov"]);
                    // $("#loy_clv").text(result["loyal_cus_clv"]["clv"]);
                    // $("#loy_rev").text(result["loyal_cus_clv"]["revenue"]);

                    // $("#rep_users").text(result["repeat_cus_clv"]["users"]);
                    // $("#rep_freq").text(result["repeat_cus_clv"]["frequency"]);
                    // $("#rep_aov").text(result["repeat_cus_clv"]["aov"]);
                    // $("#rep_clv").text(result["repeat_cus_clv"]["clv"]);
                    // $("#rep_rev").text(result["repeat_cus_clv"]["revenue"]);

                    // $("#cus_users").text(result["all_cus_clv"]["users"]);
                    // $("#cus_freq").text(result["all_cus_clv"]["frequency"]);
                    // $("#cus_aov").text(result["all_cus_clv"]["aov"]);
                    // $("#cus_clv").text(result["all_cus_clv"]["clv"]);
                    // $("#cus_rev").text(result["all_cus_clv"]["revenue"]);

                    // $("#top_users").text(result["top_cus_clv"]["users"]);
                    // $("#top_freq").text(result["top_cus_clv"]["frequency"]);
                    // $("#top_aov").text(result["top_cus_clv"]["aov"]);
                    // $("#top_clv").text(result["top_cus_clv"]["clv"]);
                    // $("#top_rev").text(result["top_cus_clv"]["revenue"]);

                    // $("#bottom_users").text(result["low_cus_clv"]["users"]);
                    // $("#bottom_freq").text(result["low_cus_clv"]["frequency"]);
                    // $("#bottom_aov").text(result["low_cus_clv"]["aov"]);
                    // $("#bottom_clv").text(result["low_cus_clv"]["clv"]);
                    // $("#bottom_rev").text(result["low_cus_clv"]["revenue"]);

                    // $("#risk_users").text(result["risk_cus_clv"]["users"]);
                    // $("#risk_freq").text(result["risk_cus_clv"]["frequency"]);
                    // $("#risk_aov").text(result["risk_cus_clv"]["aov"]);
                    // $("#risk_clv").text(result["risk_cus_clv"]["clv"]);
                    // $("#risk_rev").text(result["risk_cus_clv"]["revenue"]);

                    // $("#churn_users").text(result["churn_cus_clv"]["users"]);
                    // $("#churn_freq").text(result["churn_cus_clv"]["frequency"]);
                    // $("#churn_aov").text(result["churn_cus_clv"]["aov"]);
                    // $("#churn_clv").text(result["churn_cus_clv"]["clv"]);
                    // $("#churn_rev").text(result["churn_cus_clv"]["revenue"]);

                }
            });
        }

        function location_based_age_graph() {
            var location = $("#age_location_list :selected").text();
            $.ajax({
                url: "/age_based_location_data?location=" + location,
                success: function (result) {
                    var analytics_label_arr = result["analytics_graph"]["age_category"];
                    analytics_label_arr[7] = "Unknown";

                    avg_clv = result["analytics_graph"]["avg_clv"];
                    number_of_cus = result["analytics_graph"]["no_cus_age_group"];
                    value_of_revenue = result["analytics_graph"]["val_of_revenue"];

                    avg_clv[7] = result["unknown_avg_clv"];
                    number_of_cus[7] = result["unknown_tot_cus"];
                    value_of_revenue[7] = result["unknown_val_of_rev"];

                    for (var i = 0; i < avg_clv.length; i++) {
                        avg_clv[i] = display_float_value(avg_clv[i]);
                        number_of_cus[i] = display_int_value(number_of_cus[i]);
                        value_of_revenue[i] = display_float_value(value_of_revenue[i]);
                    }

                    age_based_analytics_graph.data.labels = analytics_label_arr;
                    age_based_analytics_graph.data.datasets[0]["data"] = result["analytics_graph"]["age_category_rev_percentage"];
                    age_based_analytics_graph.data.datasets[1]["data"] = [0, 0, 0, 0, 0, 0, 0, parseFloat(result["analytics_graph_unknown"])];
                    age_based_analytics_graph.update();



                }
            });
        }

        function location_based_revenue_graph() {
            var location = $("#revenue_location_list :selected").text();
            $.ajax({
                url: "/revenue_based_location_data?location=" + location,
                success: function (result) {
                    // revenue_graph.data.labels = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
                    revenue_graph.data.datasets[0]["data"] = result["revenue_graph"]["transaction_value"];
                    revenue_graph.update();

                }
            });
        }

        function location_based_excutive_summary(result) {

            $("#msg_alert").html("");
            var month = 0;
            var year = 2021;
            var filter_type = $("#selectpicker").val();
            var filter_values = "";
            var location = $("#excutive_summary_list :selected").text();
            if (filter_type == "green") {
                year = $("#year_list").val();
                month = $("#month_list").val();
                if (year == "") {
                    $("#msg_alert").html("<div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\" ><strong>Warning!</strong> Select Year\n" +
                        "                                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n" +
                        "                                        aria-label=\"Close\"></button></div>");
                    return;
                }
                if (month == "") {
                    month = 0;
                }
                filter_values = "&year_val=" + year + "&month_val=" + month;


            }
            else {
                var from_date = $("#from_date").val();
                var to_date = $("#to_date").val();
                if (from_date == "" || to_date == "") {
                    $("#msg_alert").html("<div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\" ><strong>Warning!</strong> Select From Date and To Date.\n" +
                        "                                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n" +
                        "                                        aria-label=\"Close\"></button></div>");
                    return;
                }
                filter_values = "&start_dt_val=" + from_date + "&end_dt_val=" + to_date;
            }
            $("#fa_loading").show();
            console.log(filter_values)
            setTimeout(function () { $("#fa_loading").hide(); }, 20000);

            $.ajax({
                url: "/location_based_excutive_summary?location=" + location + filter_values,
                success: function (result) {


                    fill_executive_summary_data(result);



                }
            });
        }

        function calculate_changes_val(sel_val, prev_val) {
            var changes_val;
            if (prev_val != "" && prev_val != "-") {
                changes_val = display_float_value((sel_val - prev_val) / (prev_val) * 100) + " %";
            }
            else {
                changes_val = "-";
            }
            return changes_val;

        }

        function fill_executive_summary_data(result) {
            if (Object.keys(result["executive_summary"]).length > 0) {
                $("#cus_sel").text(display_int_value(result["executive_summary"]["customers_selected"]));
                $("#cus_pre").text(display_int_value(result["executive_summary"]["customers_prev"]));
                $("#cus_cha").text(calculate_changes_val(display_int_value(result["executive_summary"]["customers_selected"]), display_int_value(result["executive_summary"]["customers_prev"])));

                $("#ord_sel").text(display_int_value(result["executive_summary"]["orders_selected"]));
                $("#ord_pre").text(display_int_value(result["executive_summary"]["orders_prev"]));
                $("#ord_cha").text(calculate_changes_val(display_int_value(result["executive_summary"]["orders_selected"]), display_int_value(result["executive_summary"]["orders_prev"])));

                $("#rev_sel").text(display_float_value(result["executive_summary"]["revenue_selected"]));
                $("#rev_pre").text(display_float_value(result["executive_summary"]["revenue_prev"]));
                $("#rev_cha").text(calculate_changes_val(display_float_value(result["executive_summary"]["revenue_selected"]), display_float_value(result["executive_summary"]["revenue_prev"])));

                $("#aov_sel").text(display_float_value(result["executive_summary"]["aov_selected"]));
                $("#aov_pre").text(display_float_value(result["executive_summary"]["aov_prev"]));
                $("#aov_cha").text(calculate_changes_val(display_float_value(result["executive_summary"]["aov_selected"]), display_float_value(result["executive_summary"]["aov_prev"])));

                $("#newcus_sel").text(display_int_value(result["executive_summary"]["new_customers_selected"]));
                $("#newcus_pre").text(display_int_value(result["executive_summary"]["new_customers_prev"]));
                $("#newcus_cha").text(calculate_changes_val(display_int_value(result["executive_summary"]["new_customers_selected"]), display_int_value(result["executive_summary"]["new_customers_prev"])));

                $("#rep_sel").text(display_int_value(result["executive_summary"]["repeat_customers_selected"]));
                $("#rep_pre").text(display_int_value(result["executive_summary"]["repeat_customers_prev"]));
                $("#rep_cha").text(calculate_changes_val(display_int_value(result["executive_summary"]["repeat_customers_selected"]), display_int_value(result["executive_summary"]["repeat_customers_prev"])));

                $("#churn_sel").text(display_int_value(result["executive_summary"]["churn_customers_selected"]));
                $("#churn_pre").text(display_int_value(result["executive_summary"]["churn_customers_prev"]));
                $("#churn_cha").text(calculate_changes_val(display_int_value(result["executive_summary"]["churn_customers_selected"]), display_int_value(result["executive_summary"]["churn_customers_prev"])));

                $("#acl_sel").text(display_float_value(result["executive_summary"]["aclv_customers_selected"]));
                $("#acl_pre").text(display_float_value(result["executive_summary"]["aclv_customers_prev"]));
                $("#acl_cha").text(calculate_changes_val(display_float_value(result["executive_summary"]["aclv_customers_selected"]), display_float_value(result["executive_summary"]["aclv_customers_prev"])));
            }
            else {
                $("#cus_sel").text("-");
                $("#cus_pre").text("-");
                $("#cus_cha").text("-");

                $("#ord_sel").text("-");
                $("#ord_pre").text("-");
                $("#ord_cha").text("-");

                $("#rev_sel").text("-");
                $("#rev_pre").text("-");
                $("#rev_cha").text("-");

                $("#aov_sel").text("-");
                $("#aov_pre").text("-");
                $("#aov_cha").text("-");

                $("#newcus_sel").text("-");
                $("#newcus_pre").text("-");
                $("#newcus_cha").text("-");

                $("#rep_sel").text("-");
                $("#rep_pre").text("-");
                $("#rep_cha").text("-");

                $("#churn_sel").text("-");
                $("#churn_pre").text("-");
                $("#churn_cha").text("-");

                $("#acl_sel").text("-");
                $("#acl_pre").text("-");
                $("#acl_cha").text("-");
                $("#msg_alert").html("<div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\" ><strong>Information!</strong> Record Not Found!\n" +
                    "                                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"\n" +
                    "                                        aria-label=\"Close\"></button></div>");
            }
            $("#fa_loading").hide();
        }

        function fill_segment_table_data(result) {
            $("#loy_users").text(display_int_value(result["loyal_cus_clv"]["users"]));
            $("#loy_freq").text(display_float_value(result["loyal_cus_clv"]["frequency"]));
            $("#loy_aov").text(display_float_value(result["loyal_cus_clv"]["aov"]));
            $("#loy_clv").text(display_float_value(result["loyal_cus_clv"]["clv"]));
            $("#loy_rev").text(display_float_value(result["loyal_cus_clv"]["revenue"]));

            $("#rep_users").text(display_int_value(result["repeat_cus_clv"]["users"]));
            $("#rep_freq").text(display_float_value(result["repeat_cus_clv"]["frequency"]));
            $("#rep_aov").text(display_float_value(result["repeat_cus_clv"]["aov"]));
            $("#rep_clv").text(display_float_value(result["repeat_cus_clv"]["clv"]));
            $("#rep_rev").text(display_float_value(result["repeat_cus_clv"]["revenue"]));

            $("#cus_users").text(display_int_value(result["all_cus_clv"]["users"]));
            $("#cus_freq").text(display_float_value(result["all_cus_clv"]["frequency"]));
            $("#cus_aov").text(display_float_value(result["all_cus_clv"]["aov"]));
            $("#cus_clv").text(display_float_value(result["all_cus_clv"]["clv"]));
            $("#cus_rev").text(display_float_value(result["all_cus_clv"]["revenue"]));

            $("#top_users").text(display_int_value(result["top_cus_clv"]["users"]));
            $("#top_freq").text(display_float_value(result["top_cus_clv"]["frequency"]));
            $("#top_aov").text(display_float_value(result["top_cus_clv"]["aov"]));
            $("#top_clv").text(display_float_value(result["top_cus_clv"]["clv"]));
            $("#top_rev").text(display_float_value(result["top_cus_clv"]["revenue"]));

            $("#bottom_users").text(display_int_value(result["low_cus_clv"]["users"]));
            $("#bottom_freq").text(display_float_value(result["low_cus_clv"]["frequency"]));
            $("#bottom_aov").text(display_float_value(result["low_cus_clv"]["aov"]));
            $("#bottom_clv").text(display_float_value(result["low_cus_clv"]["clv"]));
            $("#bottom_rev").text(display_float_value(result["low_cus_clv"]["revenue"]));

            $("#risk_users").text(display_int_value(result["risk_cus_clv"]["users"]));
            $("#risk_freq").text(display_float_value(result["risk_cus_clv"]["frequency"]));
            $("#risk_aov").text(display_float_value(result["risk_cus_clv"]["aov"]));
            $("#risk_clv").text(display_float_value(result["risk_cus_clv"]["clv"]));
            $("#risk_rev").text(display_float_value(result["risk_cus_clv"]["revenue"]));

            $("#churn_users").text(display_int_value(result["churn_cus_clv"]["users"]));
            $("#churn_freq").text(display_float_value(result["churn_cus_clv"]["frequency"]));
            $("#churn_aov").text(display_float_value(result["churn_cus_clv"]["aov"]));
            $("#churn_clv").text(display_float_value(result["churn_cus_clv"]["clv"]));
            $("#churn_rev").text(display_float_value(result["churn_cus_clv"]["revenue"]));
        }

        function display_float_value(value) {
            var result;
            if (value != "" && value != "-") {
                result = parseFloat("" + value).toFixed(2);

            }
            else
                result = value;
            return result;

        }

        function display_int_value(value) {
            var result;

            if (value != "" && value != "-") {
                result = parseInt("" + value);
            }
            else
                result = value;
            return result;

        }

        function display_map(map_data) {

            


            
            // // ISO ID code for city or <state></state>
            
        }

        function change_map_data(toggle_param)
        {
            if(toggle_param === "clv")
            {
                bubble_map.bubbles(bubbles_clv, {
                    popupTemplate: function (geo, data) {

                        return `<div class="hoverinfo"><b>Restaurant</b>: ${data.state}<br/> <b>Average CLV</b>: ${data.averageCLV} (€)<br/> <b>Average Loyal CLV</b>: ${data.averageLoyalCLV} (€)<br/> <b>Percentage of Loyal Customer </b>: ${data.loyalCustomerPercentage}%<br/> <b>Number of New Customer</b>: ${data.numberOfNewCustomer}<br/> <b>Number of Repeat Customer</b>: ${data.numberOfRepeatCustomer}<br/> <b>Revenue From Repeat Customer</b>: ${data.revenueFromRepeatCustomer} (€)<br/> </div>`;
                    }
                });
            }
            else
            {
                bubble_map.bubbles(bubbles_revenue, {
                    popupTemplate: function (geo, data) {

                        return `<div class="hoverinfo"><b>Restaurant</b>: ${data.state}<br/> <b>Average CLV</b>: ${data.averageCLV} (€)<br/> <b>Average Loyal CLV</b>: ${data.averageLoyalCLV} (€)<br/> <b>Percentage of Loyal Customer </b>: ${data.loyalCustomerPercentage}%<br/> <b>Number of New Customer</b>: ${data.numberOfNewCustomer}<br/> <b>Number of Repeat Customer</b>: ${data.numberOfRepeatCustomer}<br/> <b>Revenue From Repeat Customer</b>: ${data.revenueFromRepeatCustomer} (€)<br/> </div>`;
                    }
                });
            }
            
        }
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light p-3"
        style="background-color: #ffffff !important;border-bottom: 1px solid rgb(211, 208, 208); ">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03"
                aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="nav nav-tabs" id="nav-tab" role="tablist" style="border: none;">
                <a class="nav-link1 active text-decoration-none" id="nav-home-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true"
                    href="javascript:;">Home</a>&emsp;
                <a class="nav-link1 text-decoration-none" id="nav-profile-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-exeutive" type="button" role="tab" aria-controls="nav-profile"
                    aria-selected="false" href="javascript:;">Executive Summary</a>

            </div>
            <form class="d-flex">
                <a><i class="fa fa-user text-primary" aria-hidden="true"></i></a>
            </form>
        </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <main class="mt-2 pt-2">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <h6 class="card-title text-primary">Customer Segmentations <label
                                                    id="restaurant_name"></label> <label id="cs_selectionDate"
                                                    class="text-secondary">( 01-08-2019 -
                                                    28-02-2022 )</label> </h6>
                                        </div>
                                        <div class="col-md-4">
                                            <select id="segment_location_list"
                                                onchange="location_based_customer_segmentation();" data-max-options="5"
                                                data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <hr>
                                    <table class="table table-bordered table-responsive" id="customer_segmantation">
                                        <tbody>
                                            <tr>
                                                <th class="col-3 bg-secondary"></th>
                                                <th class="col-1 bg-secondary text-white">Users</th>
                                                <th class="col-1 bg-secondary text-white">Frequency</th>
                                                <th class="col-1 bg-secondary text-white">AOV (&#8364;)</th>
                                                <th class="col-1 bg-secondary text-white">CLV (&#8364;)</th>
                                                <th class="col-1 bg-secondary text-white">Revenue (&#8364;)</th>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Loyals<br /> <label
                                                        class="text-secondary">Customer
                                                        with 3+ Purchase</label></td>
                                                <td id="loy_users"></td>
                                                <td id="loy_freq"></td>
                                                <td id="loy_aov"></td>
                                                <td id="loy_clv"></td>
                                                <td id="loy_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Repeats<br /><label
                                                        class="text-secondary">Customer
                                                        with Purchases</label></td>
                                                <td id="rep_users"></td>
                                                <td id="rep_freq"></td>
                                                <td id="rep_aov"></td>
                                                <td id="rep_clv"></td>
                                                <td id="rep_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Customers<br /><label
                                                        class="text-secondary">Customer
                                                        with atleast 1 Purchase</label></td>
                                                <td id="cus_users"></td>
                                                <td id="cus_freq"></td>
                                                <td id="cus_aov"></td>
                                                <td id="cus_clv"></td>
                                                <td id="cus_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Top Spenders<br /><label
                                                        class="text-secondary">Customers in the top quartile of
                                                        spending</label></td>
                                                <td id="top_users"></td>
                                                <td id="top_freq"></td>
                                                <td id="top_aov"></td>
                                                <td id="top_clv"></td>
                                                <td id="top_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Bottom Spenders<br /> <label
                                                        class="text-secondary">Customers in the bottom quartile of
                                                        spending</label></td>
                                                <td id="bottom_users"></td>
                                                <td id="bottom_freq"></td>
                                                <td id="bottom_aov"></td>
                                                <td id="bottom_clv"></td>
                                                <td id="bottom_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">At Risk Customers<br /><label
                                                        class="text-secondary">Customer at the risk of churning</label>
                                                </td>
                                                <td id="risk_users"></td>
                                                <td id="risk_freq"></td>
                                                <td id="risk_aov"></td>
                                                <td id="risk_clv"></td>
                                                <td id="risk_rev"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-primary">Churned Customers<p><label
                                                            class="text-secondary">Customer who have not
                                                            made a Purchase in 2x</label><br /><label
                                                            class="text-secondary">
                                                            the average number of days
                                                            between orders</label></p>
                                                </td>
                                                <td id="churn_users"></td>
                                                <td id="churn_freq"></td>
                                                <td id="churn_aov"></td>
                                                <td id="churn_clv"></td>
                                                <td id="churn_rev"></td>
                                            </tr>
                                        </tbody>

                                    </table>

                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-10">
                                            <h6 class="card-title text-primary">Customer Life Time Value Prediction <label class="text-danger">(vs)</label> Actual
                                                OverTime <label class="text-secondary" id="ca_fromToDate">( 01-05-2021 -
                                                    30-05-2022 )</label>
                                            </h6>

                                        </div>
                                        <div class="col-md-2 ">
                                            <button id="ts_series_reset" class="btn btn-success btn-sm"> Reset Zoom</button>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chartPie" style="width: 100%;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3 mb-3">
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-primary">Location Based Analysis</h6>
                                    <hr>
                                    <div id="uk" style="height: 950px; width: 800px;position: relative;"></div>
                                    <br>
                                    <div class="container">
                                        
                                        <div class="row justify-content-center">
                                            <div class="col-4">
                                                <div class="btn-group">
                                                    <input type="radio" class="btn-check" name="options" id="rb_clv_avg" onclick="change_map_data('clv');"  autocomplete="off" checked>
                                                    <label class="btn btn-outline-primary" for="rb_clv_avg" >AVG. CLV (€)</label>

                                                    <input type="radio" class="btn-check" name="options" id="rb_revenue" onclick="change_map_data('revenue');"   autocomplete="off" >
                                                    <label class="btn btn-outline-primary" for="rb_revenue" >Total Revenue (€)</label>
                                                </div>
                                            </div>                                            
                                        </div>                                        
                                    </div>                        
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <h6 class="card-title text-primary">Age Based Analysis</h6>
                                        </div>
                                        <div class="col-md-4">
                                            <select id="age_location_list" onchange="location_based_age_graph();"
                                                data-max-options="5" data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chart" width="400" height="200"></canvas>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-7">
                                            <h6 class="card-title text-primary">Revenue Distribution Over Time</h6>
                                        </div>
                                        <div class="col-md-5">
                                            <select id="revenue_location_list"
                                                onchange="location_based_revenue_graph();" data-max-options="5"
                                                data-live-search="true"></select>
                                                <button id="revenue_reset" class="btn btn-success btn-sm"> Reset Zoom</button>
                                        </div>
                                    </div>
                                    <hr>
                                    <canvas class="chartLine" style="width:100%"></canvas>
                                </div>

                            </div>


                        </div>

                    </div>
                </div>
            </main>
        </div>
        <div class="tab-pane fade" id="nav-exeutive" role="tabpanel" aria-labelledby="nav-profile-tab">
            <div class="container">

                <div class="row mt-3 mb-3">

                    <div class="col-md-12 mb-3">
                        <div class="card rounded-0 h-100">
                            <div class="card-body w-100">

                                <h6 class="card-title text-primary text-center">Executive Summary<label
                                        class="text-secondary" id="executive_summaryLocation"></label> <label
                                        id="executive_summaryYear"></label></h6>
                                <hr>
                                <div id="msg_alert">

                                </div>
                                <!-- <div id="fa_loading" style="text-align: center;display: none;">
                                    <i class="fa fa-spinner fa-spin" style="font-size:24px;color:blue;"></i>
                                </div> -->
                                <div id="fa_loading" style="display:none ;">
                                    <div class="w-100 d-flex justify-content-center align-items-center">
                                        <div class="spinner spinner-border text-primary"></div>
                                    </div>
                                </div>
                                <div>

                                </div>
                                <div class="row">
                                    <div class="col-md-5">
                                        <select class="form-select" id="selectpicker"
                                            aria-label="Default select example">
                                            <option selected="selected" value="green">Standard</option>
                                            <option value="blue">Customised</option>
                                        </select>
                                        <br>
                                        <div class="green box">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <select class="selectpicker2 border rounded" id="year_list"
                                                        data-live-search="true" data-width="100%">
                                                        <option value="">Year</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2019">2019</option>
                                                        <option value="2020">2020</option>
                                                        <option value="2021" selected>2021</option>
                                                        <option value="2022">2022</option>
                                                        <option value="2023">2023</option>
                                                        <option value="2024">2024</option>
                                                        <option value="2025">2025</option>
                                                        <option value="2026">2026</option>
                                                        <option value="2027">2027</option>
                                                        <option value="2028">2028</option>
                                                        <option value="2029">2029</option>
                                                        <option value="2030">2030</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-6">
                                                    <select class="selectpicker1 border rounded" id="month_list"
                                                        data-live-search="true" data-width="100%">
                                                        <option value="">Month</option>
                                                        <option value="1">January</option>
                                                        <option value="2">February</option>
                                                        <option value="3">March</option>
                                                        <option value="4">April</option>
                                                        <option value="5">May</option>
                                                        <option value="6">June</option>
                                                        <option value="7">July</option>
                                                        <option value="8">August</option>
                                                        <option value="9">September</option>
                                                        <option value="10">October</option>
                                                        <option value="11">November</option>
                                                        <option value="12">December</option>
                                                    </select>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="blue box">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text">From</span>
                                                <input type="date" id="from_date" class="form-control">
                                                <span class="input-group-text">To</span>
                                                <input type="date" id="to_date" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">

                                        <div class="row">
                                            <div class="col-lg-10">
                                                <label class="col-form-label text-success">Location <i class="fa fa-filter"
                                                    aria-hidden="true"></i> :</label>
                                                <!-- <input type="text" class="form-control" placeholder="Location " /> -->
                                                <!-- <h5 className="text-secondary">Location <span><i class="fa fa-filter"
                                                            aria-hidden="true"></i></span></h5> -->
                                            </div>
                                        </div>
                                        <br>
                                        <select id="excutive_summary_list" class="border rounded"
                                            data-live-search="true" data-width="100%">
                                        </select>

                                    </div>
                                    <div class="col-md-2">

                                        <div class="row">
                                            <div class="col-md-6">&nbsp;</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">&nbsp;</div>
                                            <div class="col-md-2 "><button class="btn btn-success btn-lg"
                                                    onclick="location_based_excutive_summary();">GO</button></div>
                                        </div>
                                    </div>

                                </div>
                                <hr>
                                <table class="table table-bordered table-responsive" id="executive_summary" width="100">
                                    <tbody>
                                        <tr>
                                            <th class="col-3"></th>
                                            <th class="col-3 bg-secondary text-white">Selected</th>
                                            <th class="col-3 bg-secondary text-white">Previous</th>
                                            <th class="col-3 bg-secondary text-white">Change</th>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Customers</td>
                                            <td id="cus_sel"></td>
                                            <td id="cus_pre"></td>
                                            <td id="cus_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Orders</td>
                                            <td id="ord_sel"></td>
                                            <td id="ord_pre"></td>
                                            <td id="ord_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Revenue (&#8364;)</td>
                                            <td id="rev_sel"></td>
                                            <td id="rev_pre"></td>
                                            <td id="rev_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Average Order Value (&#8364;)</td>
                                            <td id="aov_sel"></td>
                                            <td id="aov_pre"></td>
                                            <td id="aov_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">New Customers</td>
                                            <td id="newcus_sel"></td>
                                            <td id="newcus_pre"></td>
                                            <td id="newcus_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Repeat Customers</td>
                                            <td id="rep_sel"></td>
                                            <td id="rep_pre"></td>
                                            <td id="rep_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Churned Customers</td>
                                            <td id="churn_sel"></td>
                                            <td id="churn_pre"></td>
                                            <td id="churn_cha"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-primary">Avg Customer Lifetime Value (&#8364;) </td>
                                            <td id="acl_sel"></td>
                                            <td id="acl_pre"></td>
                                            <td id="acl_cha"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>